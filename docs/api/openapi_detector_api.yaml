openapi: 3.0.1
info:
  title: Detector API (WIP)
  version: 0.1.0
paths:
  /api/v1/detector:
    post:
      tags:
        - Detector API
      operationId: detector_unary_handler_api_v1_detector_post
      parameters:
      - example: profanity.detector.v1-en
        in: header
        name: detector-id
        required: true
        schema:
          title: Detector-Id
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DetectorHttpRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetectorResponseList'
          description: Successful Response
        '422':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Detector Unary Handler
components:
  schemas:
    DetectorHttpRequest:
      properties:
        text:
          example: This is my amazing prompt
          title: Text
          type: string
        parameters:
          additionalProperties:
            anyOf:
            - items:
                type: object
              type: array
            - type: boolean
            - type: number
            - type: integer
            - type: object
            - type: string
          example:
            threshold: 0.8
          title: Parameters
          type: object
      required:
      - text
      - parameters
      title: DetectorHttpRequest
      type: object
    DetectorResponse:
      properties:
        start:
          example: 0
          title: Start
          type: integer
        end:
          example: 10
          title: End
          type: integer
        text:
          example: my bad text
          title: Text
          type: string
        detection:
          example: has_HAP
          title: Detection
          type: string
        detection_type:
          example: hap
          title: Detection Type
          type: string
        score:
          example: 0.5
          title: Score
          type: number
      required:
      - start
      - end
      - text
      - detection
      - detection_type
      - score
      title: DetectorResponse
      type: object
    DetectorResponseList:
      properties:
        detections:
          items:
            $ref: '#/components/schemas/DetectorResponse'
          title: Detections
          type: array
      required:
      - detections
      title: DetectorResponseList
      type: object
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          title: Detail
          type: array
      title: HTTPValidationError
      type: object
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
      - loc
      - msg
      - type
      title: ValidationError
      type: object
